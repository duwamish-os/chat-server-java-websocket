<!DOCTYPE html>
<html>
<head>
    <meta charset="ISO-8859-1">
    <title>introv</title>
</head>
<body>
<form>
    <fieldset>
        <legend>IntroV chat app</legend>
        <input id="txtMessage" type="text"><br>
        <input onclick="doCloseConnection();" value="Logout" type="button">
        <input onclick="doSendMessage();" value="Send" type="button">
        <br>
        <textarea id="txtAreaEcho" rows="5" cols="30">
    </textarea>
    </fieldset>
</form>
<script type="text/javascript">

var webSocket = new WebSocket("ws://localhost:8080/introv-ws/chat/1");

var txtAreaEcho = document.getElementById("txtAreaEcho");

txtAreaEcho.value = "";


var msg = document.getElementById("txtMessage");


webSocket.onopen = function(msgEvent){
                      txtAreaEcho.value += "Connected ... \n";
                   };
webSocket.onmessage = function(msgEvent){
                       txtAreaEcho.value += "Neighbour : " + msgEvent.data + "\n";
                     };
webSocket.onclose = function(msgEvent){
                      txtAreaEcho.value += "Logout ... \n";
                     };
webSocket.onerror = function(msgEvent){
                        txtAreaEcho.value += "Error ... \n";
                      };


/**
 *  Send Message
 */
function doSendMessage()
{
    webSocket.send(msg.value);
    txtAreaEcho.value += "Me : " + msg.value + "\n";
    msg.value = "";
}

/**
 *  Close Connection
 */
function doCloseConnection(){
    webSocket.close();
}

</script>
</body>
</html>
